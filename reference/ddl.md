```sql
-- =========================================================
-- 1) users
-- =========================================================
create table if not exists public.users (
  id            bigint generated by default as identity primary key,
  username      text not null unique,
  password_hash text not null,
  nickname      text not null,
  role          text not null default 'member',
  is_active     boolean not null default true,
  created_at    timestamptz not null default now(),
  updated_at    timestamptz not null default now()
);


-- =========================================================
-- 2) text_banner_categories
-- =========================================================
create table if not exists public.text_banner_categories (
  id         bigint generated by default as identity primary key,
  code       text not null unique,
  name       text not null,
  sort_order int  not null default 0,
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now()
);


-- =========================================================
-- 3) text_banners
-- =========================================================
create table if not exists public.text_banners (
  id          bigint generated by default as identity primary key,
  category_id bigint not null
      references public.text_banner_categories(id)
      on delete cascade,

  name        text not null,
  link        text not null,
  sort_order  int  not null default 0,

  created_by  bigint
      references public.users(id)
      on delete set null,

  created_at  timestamptz not null default now(),
  updated_at  timestamptz not null default now()
);


-- =========================================================
-- 4) image_banner
-- =========================================================
create table if not exists public.image_banner (
  id         bigint generated by default as identity primary key,
  name       text not null,
  link       text not null,
  image_url  text not null,

  created_by bigint
      references public.users(id)
      on delete set null,

  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now()
);


-- =========================================================
-- 5) main_banner
-- =========================================================
create table if not exists public.common_banner (
  id         bigint generated by default as identity primary key,
  name       text not null,
  link       text not null,
  image_url  text not null,

  created_by bigint
      references public.users(id)
      on delete set null,

  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now()
);


-- =========================================================
-- Seed: text_banner_categories 초기 12개
-- =========================================================
insert into public.text_banner_categories (code, name, sort_order)
values
  ('promotion', '텔레그램 홍보방 TOP 10', 0),
  ('taxidermy', '텔레그램 박제방 TOP 10', 1),
  ('scammer',   '텔레그램 사기꾼조회 TOP 10', 2),
  ('toto',      '토토사이트 TOP 10', 3),
  ('holdem',    '텔레그램 홀덤 TOP 10', 4),
  ('otc',       '텔레그램 OTC 업자 TOP 10', 5),
  ('agent',     '텔레그램 대리결제 업자 TOP 10', 6),
  ('usim',      '텔레그램 유심 업자 TOP 10', 7),
  ('010',       '텔레그램 010인증 업자 TOP 10', 8),
  ('design',    '텔레그램 디자인 업자 TOP 10', 9),
  ('db',        '텔레그램 DB 업자 TOP 10', 10),
  ('etc',       '텔레그램 기타 업자 TOP 10', 11)
on conflict (code) do nothing;


-- =========================================================
-- scammer : 블랙리스트 원장
-- =========================================================
create table public.scammer (
  id bigint generated by default as identity primary key,
  name text not null,
  phone_number text,
  bank_account_number text,
  created_at timestamptz not null default now(),
  created_by bigint
      references public.users(id)
                on delete set null
);

-- =========================================================
-- scammer_search : 일 단위 검색 건수 집계
-- =========================================================
create table public.scammer_search (
 stat_date date primary key,      -- KST 기준 날짜
 count bigint not null default 0  -- 해당 날짜의 검색 누적 건수
);

-- =========================================================
-- (참고) 검색 발생 시 카운트 +1 (원하는 곳에서 호출)
-- =========================================================
-- KST "오늘"을 date로 계산해서 upsert
-- insert into public.blacklist_search (stat_date, count)
-- values ((now() at time zone 'Asia/Seoul')::date, 1)
-- on conflict (stat_date)
-- do update set count = public.blacklist_search.count + 1;


```